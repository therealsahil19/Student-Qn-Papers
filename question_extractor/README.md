# ICSE Class 10 Math Question Extractor

A Python framework for extracting questions from ICSE Class 10 Mathematics papers (2026 syllabus) based on user-specified topics.

## Quick Start

### 1. Install Dependencies
```bash
pip install PyMuPDF
```

### 2. Configure Topics
Edit `topics_config.json` to enable/disable topics. The config includes all 7 units and 18+ topics with detailed formulas, keywords, and edge cases.

### 3. Use the Framework
```bash
# View syllabus info
python extractor.py --syllabus-info

# List all units
python extractor.py --list-units

# List all topics (grouped by unit)
python extractor.py --list-topics

# Check dependencies
python extractor.py --check

# Enable/disable topics
python extractor.py --enable-topic "Quadratic_Equations"
python extractor.py --disable-topic "GST"

# Generate AI extraction prompt
python extractor.py --generate-prompt

# Prepare PDF images for analysis
python extractor.py --pdf "../ICSE 2024.pdf" --prepare-images ./images

# Update question bank summaries
python update_summary.py "Algebra_Questions.txt" "Commercial_Math_Questions.txt"
```

## Batch Processing Workflow

For a comprehensive guide on how to handle new papers and maintain the question bank, see [FUTURE_EXTRACTION_GUIDE.md](FUTURE_EXTRACTION_GUIDE.md).

1. **PDF to Images**: Convert PDF pages to images using `extractor.py`.
2. **Visual Analysis**: Identify target questions (GST, Algebra, etc.) from images.
3. **Extraction**: Use the AI prompt (generated by `extractor.py --generate-prompt`) to extract structured questions.
4. **Append**: Add extracted questions to the relevant `.txt` file.
5. **Update**: Run `update_summary.py` to refresh counts and timestamps.

## Output Format

**Default output is TXT** - Questions are organized by Unit ‚Üí Topic with:
- Question number and marks
- Full question text
- Subtopic classification
- Difficulty level
- Source paper reference

## Syllabus Coverage (ICSE 2026)

| Unit | Topics | Weightage |
|------|--------|-----------|
| Commercial Mathematics | GST, Banking, Shares & Dividends | 8-12 marks |
| Algebra | Inequations, Quadratic Eq, Ratio, Matrices, AP/GP, Coord Geometry | 20-25 marks |
| Geometry | Similarity, Loci, Circles, Constructions | 15-20 marks |
| Mensuration | Cylinder, Cone, Sphere, Combined Solids | 10-15 marks |
| Trigonometry | Identities, Heights & Distances | 12-18 marks |
| Statistics | Mean, Median, Histogram, Ogive | 8-12 marks |
| Probability | Basic Probability, Dice, Cards, Coins | Combined |

## Python API

```python
from extractor import QuestionExtractor

extractor = QuestionExtractor()

# Get enabled topics
topics = extractor.topic_manager.get_enabled_topics()

# Generate prompt for AI
prompt = extractor.generate_extraction_prompt()

# After AI extraction, parse results
extractor.add_questions_from_json(ai_response, source_paper="ICSE 2024")

# Save to TXT (default)
extractor.save_results("question_bank.txt", format="txt")

# Or save to JSON/Markdown
extractor.save_results("output.json", format="json")
```

## Maintenance Tools

### Summary Updater
`update_summary.py` is a utility to automatically recount questions and update the summary sections inside your question bank files. It detects topics and question numbers (starting with 'Q') and updates the file in-place.

```bash
python update_summary.py [file1.txt] [file2.txt] ...
```

---

## üìê Geometry Figure Support

Geometry questions can include `[FIGURE]` blocks to capture diagram information for rendering.

### Figure Block Syntax

```
[FIGURE]
type: circle_tangent
description: |
    Circle with center O. PT is tangent at T.
    Angle TAB = 32¬∞ marked.
elements:
  - circle: {center: O, points: [A, T, B]}
  - tangent: {circle: O, point: T, external_point: P}
given_values:
  TAB: "32¬∞"
find_values: [TPA, TBA]
[/FIGURE]
```

### Supported Figure Types

- `bpt_triangle` - Basic Proportionality Theorem
- `similar_triangles` - Similarity proofs
- `circle_tangent` - Tangent problems
- `circle_chord` - Intersecting chords
- `cyclic_quadrilateral` - Cyclic quad properties
- `alternate_segment` - Alternate segment theorem
- `construction_*` - Various constructions

See `Geometry_Questions_Template.txt` for complete examples.

---

## üìÑ Exam Paper Generator

Generate formatted exam papers (PDF/Word) from question banks with automatic figure rendering.

### Installation

```bash
pip install matplotlib reportlab python-docx PyYAML
```

### Usage

```bash
# Generate PDF
python paper_generator.py --input Geometry_Questions.txt --output exam.pdf

# Generate with specific topics
python paper_generator.py --input Geometry_Questions.txt --topics "Circles,Similarity" --output geo.pdf

# Generate Word document
python paper_generator.py --input Geometry_Questions.txt --output exam.docx --format docx

# Check dependencies
python paper_generator.py --check-deps
```

### Features

- ‚úÖ Auto-selects questions for Section A (MCQs) and Section B (long answer)
- ‚úÖ Renders geometry figures from `[FIGURE]` blocks
- ‚úÖ ICSE exam format with standard instructions
- ‚úÖ Customizable title, marks, topics, and duration
- ‚úÖ PDF and Word output formats

---

## üß™ Testing

```bash
# Test geometry schema parsing
python geometry_schema.py

# Test figure rendering
python figure_renderer.py --test

# Check all dependencies
python paper_generator.py --check-deps
```

---

## üìÅ File Structure

```
question_extractor/
‚îú‚îÄ‚îÄ extractor.py              # Main extraction framework
‚îú‚îÄ‚îÄ topics_config.json        # Topic configuration
‚îú‚îÄ‚îÄ update_summary.py         # Question count updater
‚îú‚îÄ‚îÄ geometry_schema.py        # Figure type definitions & parser
‚îú‚îÄ‚îÄ figure_renderer.py        # Matplotlib figure rendering
‚îú‚îÄ‚îÄ paper_generator.py        # PDF/Word paper generation
‚îú‚îÄ‚îÄ Algebra_Questions.txt     # Algebra question bank
‚îú‚îÄ‚îÄ AP_GP_Matrices_Probability_Questions.txt
‚îú‚îÄ‚îÄ Geometry_Questions_Template.txt  # Geometry format examples
‚îú‚îÄ‚îÄ FUTURE_EXTRACTION_GUIDE.md
‚îî‚îÄ‚îÄ README.md
```

