Description
Add unit tests for `QuestionExtractor.add_questions_from_json` in `question_extractor/extractor.py` to verify robust parsing of LLM output.

Location
question_extractor/extractor.py:429

Rationale
Critical path for data ingestion, easy to test with JSON strings.

Code context
    def add_questions_from_json(
        self, 
        json_data: str, 
        source_paper: str = "",
        page_number: int = 0
    ):

Description
Add edge case tests for `FigureParser._normalize_yaml_block` in `question_extractor/geometry_schema.py` to handle tricky indentation.

Location
question_extractor/geometry_schema.py:254

Rationale
Pure string manipulation logic, critical for parsing user input correctly.

Code context
    def _normalize_yaml_block(self, block: str) -> str:
        """
        Normalize YAML block indentation for parsing.
        
        Handles figure blocks that are indented in question bank files.

Description
Extract the embedded `test()` function in `question_extractor/geometry_schema.py` into a proper test file `tests/test_geometry_schema.py`.

Location
question_extractor/geometry_schema.py:487

Rationale
The tests already exist in the file, they just need to be moved to a standard test framework.

Code context
def test():
    """Test the figure parsing functionality."""
    
    print("=" * 60)
    print("Testing Geometry Schema Module")
    print("=" * 60)
    
    # Test 1: Parse YAML format

Description
Add unit tests for `QuestionBankParser.parse_content` in `question_extractor/paper_generator.py` to ensure correct parsing of question bank text.

Location
question_extractor/paper_generator.py:143

Rationale
Pure function, easy to test with sample input strings.

Code context
    def parse_content(self, content: str) -> List[Question]:
        """Parse question bank content."""
        
        self.questions = []
        self.topics = {}
        
        # Split by topic sections

Description
Add tests for `PaperBuilder._auto_select_sections` in `question_extractor/paper_generator.py`.

Location
question_extractor/paper_generator.py:670

Rationale
Logic for structuring the paper based on available questions. Requires setting up question lists.

Code context
    def _auto_select_sections(self, available: List[Question], total_marks: int) -> List[Section]:
        """Automatically select questions and organize into sections."""
        
        sections = []
        
        # Section A: MCQs (1 mark each)
Description
Use of deprecated and insecure `tempfile.mktemp()` function, which is vulnerable to race conditions (TOCTOU).

Location
question_extractor/paper_generator.py:670

Rationale
tempfile.mktemp is marked as insecure in the Python documentation and standard security tools due to race conditions.

Code context
            # Create a temporary image
            renderer = FigureRenderer(RenderConfig(figsize=(5, 5), dpi=150))
            renderer.render(figure)
            
            # Save to temporary file
            temp_path = tempfile.mktemp(suffix='.png')
            renderer.save_png(temp_path)
            renderer.close()
            
            self.temp_images.append(temp_path)

